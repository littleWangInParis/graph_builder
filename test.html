<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>D3 坐标轴 + 网格线</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
    }
    .axis path,
    .axis line {
      stroke: #333;
    }
    .grid line {
      stroke: #ccc;
      stroke-dasharray: 2, 2;
    }
    .grid path {
      display: none;
    }
  </style>
</head>
<body>
  <svg width="600" height="400"></svg>

  <script>
    const svg = d3.select('svg')
    const width = +svg.attr('width')
    const height = +svg.attr('height')
    const margin = { top: 20, right: 20, bottom: 40, left: 50 }
    const innerWidth = width - margin.left - margin.right
    const innerHeight = height - margin.top - margin.bottom

    const xScale = d3.scaleLinear()
      .domain([0, 100])
      .range([0, innerWidth])

    const yScale = d3.scaleLinear()
      .domain([0, 100])
      .range([innerHeight, 0])

    const xAxis = d3.axisBottom(xScale).ticks(10)
    const yAxis = d3.axisLeft(yScale).ticks(10)

    const xGrid = d3.axisBottom(xScale)
      .tickSize(-innerHeight)
      .tickFormat('')

    const yGrid = d3.axisLeft(yScale)
      .tickSize(-innerWidth)
      .tickFormat('')

    const g = svg.append('g')
      .attr('transform', `translate(${margin.left},${margin.top})`)

    // 网格线
    g.append('g')
      .attr('class', 'grid x-grid')
      .attr('transform', `translate(0,${innerHeight})`)
      .call(xGrid)

    g.append('g')
      .attr('class', 'grid y-grid')
      .call(yGrid)

    // 坐标轴
    g.append('g')
      .attr('class', 'axis x-axis')
      .attr('transform', `translate(0,${innerHeight})`)
      .call(xAxis)

    g.append('g')
      .attr('class', 'axis y-axis')
      .call(yAxis)
  </script>
</body>
</html>